
# ☕ OrderUI 프로젝트 - 주문자용 UI 문서

## 1. 개요

`OrderUI`는 카페 키오스크 또는 모바일 주문 시스템의 주문자용 UI로, 고객이 메뉴를 선택하고, 장바구니에 담아 주문을 완료할 수 있는 기능을 제공한다.  
이 UI는 **TCP 소켓 통신**을 통해 서버에 연결되며, 주문 요청을 서버로 전송한다. 서버는 이를 주방 UI(`KitchenUI`)로 전달하여 조리 및 매출 처리를 연계한다.

UI는 실행 직후 서버의 IP를 입력받으며, 연결이 성공하면 메뉴를 주문할 수 있는 UI가 나타난다.

---

## 2. 주요 기능

- **메뉴 추가 및 장바구니 관리**  
  사용자는 원하는 음료 또는 메뉴를 장바구니에 담을 수 있으며, 수량 조절 및 삭제가 가능하다.

- **주문 전송 기능**  
  장바구니에 담긴 메뉴들을 서버에 전송하여 주문을 확정할 수 있다. 이때 주문 내용은 JSON 형식으로 전송되며, 각 항목은 메뉴 이름과 수량을 포함한다.

- **장바구니 초기화**  
  사용자가 원할 경우 전체 장바구니를 비울 수 있다.

---

## 3. 화면 구성

> 📌 참고: UI는 WPF(Window Presentation Foundation) 기반으로 구성되었으며, MVVM 패턴을 따른다.
<img width="975" height="546" alt="image" src="https://github.com/user-attachments/assets/3133c66f-56b6-4b6d-a07e-8d4f29b6f3cd" />


### 3.1. 메뉴 선택 영역

- 메뉴 버튼을 클릭하면 해당 메뉴가 장바구니에 추가된다.
- 메뉴 항목은 태그 데이터 형식으로 처리되며, `"이름,가격"` 형태로 파싱된다.

### 3.2. 장바구니 영역

- 사용자가 담은 메뉴 목록이 표시된다.
- 각 항목은 이름, 수량, 단가, 총합 가격을 표시하며, 수량 조절 및 삭제가 가능하다.

### 3.3. 총 금액 표시

- 현재 장바구니 내 메뉴들의 총 가격이 실시간으로 반영된다.

### 3.4. 버튼 구성

| 버튼 | 기능 |
|------|------|
| `주문하기` | 장바구니의 모든 항목을 서버에 전송하고 비움 |
| `장바구니 비우기` | 현재 장바구니를 모두 비운다 |
| `+ / -` | 각 항목의 수량을 1씩 증감 또는 1 이하일 경우 삭제 |

---

## 4. 동작 흐름 및 데이터 통신

### 4.1. 서버 연결

- `TcpClient`를 통해 사용자가 입력한 IP 주소로 포트 `3333`에 접속 시도
- 연결 성공 시, `"register"` 메시지를 서버에 전송하여 `"order"` 역할임을 알림

```json
{
  "type": "register",
  "role": "order"
}
```

### 4.2. 주문 처리 (`PlaceOrder`)

- 장바구니의 각 메뉴 정보를 JSON으로 구성하여 서버로 전송

```json
{
  "type": "order",
  "order_id": 1,
  "items": [
    { "menu": "아메리카노", "quantity": 2 },
    { "menu": "카페라떼", "quantity": 1 }
  ]
}
```

- 주문 성공 시 메시지박스로 알림 후 장바구니 초기화

---

## 5. ViewModel 주요 구성 요소

| 속성 / 명령 | 설명 |
|-------------|------|
| `CartItems` | `ObservableCollection` 형태의 장바구니 목록 |
| `OverallTotalPrice` | 장바구니 총합 계산값 |
| `AddItemCommand` | 메뉴 추가 명령 |
| `RemoveItemCommand` | 메뉴 수량 감소 또는 삭제 명령 |
| `PlaceOrderCommand` | 주문 확정 명령 |
| `ClearCartCommand` | 장바구니 초기화 명령 |

---

## 6. 기능별 내부 처리 요약

### 메뉴 추가 (`ExecuteAddItem`)

- 태그 데이터 파싱 후 기존 항목이면 수량 증가, 없으면 새로 추가

### 수량 감소 또는 항목 제거 (`ExecuteRemoveItem`)

- 수량이 1이면 제거, 아니면 1 감소

### 주문 확정 (`ExecutePlaceOrder`)

- JSON 메시지 구성 후 `writer.WriteLine()`으로 서버에 전송

### 장바구니 초기화 (`ExecuteClearCart`)

- 사용자 확인 후 `CartItems.Clear()` 호출

---

## 7. 기타

- UI와 ViewModel 간의 바인딩은 `INotifyPropertyChanged` 및 `ObservableCollection`을 통해 구현
- 전체 통신 메시지는 `JSON.NET (Newtonsoft.Json)` 라이브러리를 통해 직렬화 처리됨
- 현재 장바구니나 주문 내역은 파일로 저장되지 않음 (서버 측 처리 기반)
- 향후 사용자의 주문 기록 보관 또는 재주문 기능 추가 가능
